<laji-datatable
  [columns]="columns"
  [rows]="identifications"
  [clientSideSorting]="true"
  [virtualScrolling]="false"
  [loading]="loading"
  [showFooter]="false"
></laji-datatable>

<ng-template let-row="row" #drawBox>
  <button
    class="btn btn-sm"
    [ngClass]="{
      'btn-default': !drawClickedByIdx[row.preSortIndex],
      'btn-primary': drawClickedByIdx[row.preSortIndex]
     }"
    (click)="toggleDrawButton(row.preSortIndex)"
    [disabled]="loading"
  >
    {{ 'identification.recordings.' + (row.annotation.area ? 'redraw' : 'draw') | translate }}
  </button>
  <button
    *ngIf="row.annotation.area"
    class="btn btn-default btn-sm ml-2"
    (click)="removeDrawingClick.emit(row.preSortIndex)"
    [disabled]="loading"
  >
    {{ 'identification.recordings.remove' | translate }}
  </button>
</ng-template>

<ng-template let-row="row" let-rowIndex="rowIndex" #occurs>
  <ng-container *ngTemplateOutlet="radioButton; context: {row: row, rowIndex: rowIndex, value: speciesAnnotationEnum.occurs}"></ng-container>
</ng-template>
<ng-template let-row="row" let-rowIndex="rowIndex" #possiblyOccurs>
  <ng-container *ngTemplateOutlet="radioButton; context: {row: row, rowIndex: rowIndex, value: speciesAnnotationEnum.possiblyOccurs}"></ng-container>
</ng-template>

<ng-template let-row="row" let-rowIndex="rowIndex" let-value="value" #radioButton>
  <label class="datatable-checkbox">
    <input type="radio" name="{{ componentId }}_occurrence_{{ rowIndex }}" [checked]="row.annotation.occurrence === value" (change)="annotationTypeChange(row.preSortIndex, value)"/>
  </label>
</ng-template>

<ng-template let-row="row" #buttons>
  <a class="btn btn-sm btn-default mr-2" [routerLink]="['/validation', row.id]" target="_blank">
    <i class="glyphicon glyphicon-new-window"></i> {{ 'identification.recordings.' + (row.validationCount === 0 ? 'createTemplates' : 'seeTemplates') | translate }}
  </a>
  <button class="btn btn-danger btn-sm" (click)="deleteRow(row.preSortIndex)" [disabled]="loading">x</button>
</ng-template>
