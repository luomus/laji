<laji-datatable
  [loading]="loading"
  [columns]="columns"
  [rows]="data?.results || []"
  [virtualScrolling]="true"
  [height]="'calc(80vh - 50px)'"
  [page]="data?.currentPage"
  [pageSize]="data?.pageSize"
  [count]="data?.total"
  [getRowClass]="getRowClass"
  (pageChange)="pageChange.emit($event.page)"
  (sortChange)="sortChange.emit($event.sorts)"
  (rowSelect)="rowSelect.emit($event.row)"
></laji-datatable>

<ng-template let-value="value" #speciesListTpl>
  @if ((value | filterNonSpecies); as speciesList) {
    <span [title]="speciesList | speciesName | values">
      @for (species of speciesList; track species; let isLast = $last) {
        <bsg-species-name [species]="species"></bsg-species-name>{{ isLast ? '' : ', ' }}
      }
    </span>
  }
</ng-template>

<ng-template let-value="value" #statusTpl>
  <span [title]="('history.status.' + annotationStatusEnum[value]) | translate">
    {{ ('history.status.' + annotationStatusEnum[value]) | translate }}
  </span>
</ng-template>
