<div class="map-wrap">
  <laji-map
    [loading]="!sites || !siteStats"
    [options]="mapOptions"
    (loaded)="onMapLoaded()"
    >
    <div class="map-color-legend">
      <span class="map-color-legend-cnt capitalize">
        {{ 'results.sites' | translate }}
      </span>
      <span class="capitalize">
        {{ 'results.annotations' | translate }}
      </span>
      <ul>
        @for (leg of legendList; track leg) {
          <li>
            <span [ngStyle]="{'background-color': leg.color}" class="map-color-legend-color"></span>
            {{ leg.label }}
            <span class="map-color-legend-cnt">{{ countByLegend[leg.label] || 0 }}</span>
          </li>
        }
        <li>
          {{ 'results.total' | translate }}
          <span class="map-color-legend-cnt">{{ countByLegend['total'] }} {{ 'results.sites' | translate }}</span>
        </li>
      </ul>
    </div>
  </laji-map>
</div>
