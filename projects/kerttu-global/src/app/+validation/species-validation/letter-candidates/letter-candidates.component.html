<div *ngFor="let item of data; let i = index" class="audio-container">
  <div class="clearfix mt-3">
    <h4 class="d-inline-block">{{ 'validation.templates.audio' | translate }} {{ i + 1 }}</h4>
    <div class="pull-right audio-info">
      <laji-cornell-audio-info [audio]="item.audio"></laji-cornell-audio-info>
    </div>
  </div>
  <ng-container *ngIf="i < audioLoadingLimit">
    <laji-audio-viewer
      [audio]="item.audio"
      [spectrogramConfig]="spectrogramConfig"
      [spectrogramHeight]="80"
      [rectangles]="rectanges[i]"
      [showPregeneratedSpectrogram]="true"
      [playOnlyOnSingleClick]="true"
      [showControls]="false"
      (spectrogramDblclick)="onAudioClick(item.audio, $event)"
      (audioLoading)="onAudioLoadingChange($event)"
    ></laji-audio-viewer>
    <h5 class="mt-0">{{ 'validation.templates.candidates' | translate }}</h5>
    <laji-small-audio-viewer
      *ngFor="let candidate of item.candidates; let i = index"
      [area]="candidate"
      [audio]="item.audio"
      [spectrogramConfig]="spectrogramConfig"
      (templateClick)="onCandidateClick(item.audio, candidate)"
    >
    </laji-small-audio-viewer>
  </ng-container>
</div>