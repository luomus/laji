@for (recording of recordings; track recording; let i = $index) {
  <div class="audio-container">
    <div class="clearfix mt-3">
      <h4 class="d-inline-block">{{ 'validation.audio' | translate }} {{ i + 1 }}</h4>
      <div class="pull-right audio-info">
        <bsg-audio-info [audio]="recording.audio"></bsg-audio-info>
      </div>
    </div>
    @if (i < audioLoadingLimit) {
      <laji-audio-viewer
        [audio]="recording.audio"
        [sampleRate]="sampleRate"
        [spectrogramConfig]="spectrogramConfig"
        [spectrogramHeight]="80"
        [rectangles]="rectangles[i]"
        [showPregeneratedSpectrogram]="true"
        [playOnlyOnSingleClick]="true"
        [showControls]="false"
        (spectrogramDblclick)="onAudioClick(recording.audio, $event)"
        (audioLoading)="onAudioLoadingChange($event)"
      ></laji-audio-viewer>
      @if (recording.candidates.length > 0) {
        <h5 class="mt-0">{{ 'validation.candidates' | translate }}</h5>
        @for (candidate of recording.candidates; track candidate) {
          <laji-small-audio-viewer
            [audio]="recording.audio"
            [area]="candidate"
            [sampleRate]="sampleRate"
            [spectrogramConfig]="spectrogramConfig"
            (templateClick)="onCandidateClick(recording.audio, candidate)"
            >
          </laji-small-audio-viewer>
        }
      }
    }
  </div>
}
