<div class="mb-4 observation-time-container">
  <div>
    <label>{{ 'observation.form.time' | translate }}</label>
    <laji-info>{{ 'observation.info.time' | translate }}</laji-info>
  </div>
  <laji-datepicker
    [(ngModel)]="datepickerTimeStart"
    (dateSelect)="onFormQueryChange()"
    (change)="onFormQueryChange()"
    name="timeStart"></laji-datepicker>
  <laji-datepicker
    [(ngModel)]="datepickerTimeEnd"
    [toLastOfYear]="true"
    (dateSelect)="onFormQueryChange()"
    (change)="onFormQueryChange()"
    name="timeEnd"></laji-datepicker>
  <div class="btn-group btn-group-xs mt-1">
    <button type="button" class="btn btn-default btn-today" (click)="onUpdateTime(1)">{{ 'observations.form.1d' | translate }}</button>
    <button type="button" class="btn btn-default btn-week" (click)="onUpdateTime(7)">{{ 'observations.form.7d' | translate }}</button>
    <button type="button" class="btn btn-default btn-year" (click)="onUpdateTime(365)">
      {{ 'observation.form.thisYear' | translate }}
    </button>
  </div>
  <div class="d-flex flex-row flex-wrap items-end my-3">
    {{ 'observation.form.since.1' | translate }} <input type="number" [(ngModel)]="xDaysAgo" class="mx-2 form-control input-sm" style="max-width: 80px;"> {{ 'observation.form.since.2' | translate }}
  </div>
</div>

<div class="mb-4">
  <div>
    <label>{{ 'observation.form.season' | translate }}</label>
    <laji-info>{{ 'observation.info.season' | translate }}</laji-info>
  </div>
  <laji-season [season]="query.season" (seasonChange)="updateSearchQuery('season', $event)"></laji-season>
</div>

<ng-container>
  <div class="mb-4">
    <div>
      <label>{{ 'observation.form.loaded' | translate }}</label>
      <laji-info>{{ 'observation.info.loaded' | translate }}</laji-info>
    </div>
    <laji-datepicker
      [(ngModel)]="query.loadedSameOrAfter"
      (dateSelect)="onQueryChange()"
      (change)="onQueryChange()"
      name="timeStart"></laji-datepicker>
    <laji-datepicker
      [(ngModel)]="query.loadedSameOrBefore"
      [toLastOfYear]="true"
      (dateSelect)="onQueryChange()"
      (change)="onQueryChange()"
      name="timeEnd"></laji-datepicker>
    <div class="btn-group btn-group-xs mt-1">
      <button type="button" class="btn btn-default" (click)="onUpdateTime(1, 'loadedSameOrAfter', 'loadedSameOrBefore')">{{ 'observations.form.1d' | translate }}</button>
      <button type="button" class="btn btn-default" (click)="onUpdateTime(7, 'loadedSameOrAfter', 'loadedSameOrBefore')">{{ 'observations.form.7d' | translate }}</button>
      <button type="button" class="btn btn-default" (click)="onUpdateTime(365, 'loadedSameOrAfter', 'loadedSameOrBefore')">
        {{ 'observation.form.thisYear' | translate }}
      </button>
    </div>
  </div>

  <div class="mb-4">
    <div>
      <label>{{ 'observation.form.firstLoaded' | translate }}</label>
      <laji-info>{{ 'observation.info.firstLoaded' | translate }}</laji-info>
    </div>
    <laji-datepicker
      [(ngModel)]="query.firstLoadedSameOrAfter"
      (dateSelect)="onQueryChange()"
      (change)="onQueryChange()"
      name="timeStart"></laji-datepicker>

    <laji-datepicker
      [(ngModel)]="query.firstLoadedSameOrBefore"
      [toLastOfYear]="true"
      (dateSelect)="onQueryChange()"
      (change)="onQueryChange()"
      name="timeEnd"></laji-datepicker>

    <div class="btn-group btn-group-xs mt-1">
      <button type="button" class="btn btn-default" (click)="onUpdateTime(1, 'firstLoadedSameOrAfter', 'firstLoadedSameOrBefore')">{{ 'observations.form.1d' | translate }}</button>
      <button type="button" class="btn btn-default" (click)="onUpdateTime(7, 'firstLoadedSameOrAfter', 'firstLoadedSameOrBefore')">{{ 'observations.form.7d' | translate }}</button>
      <button type="button" class="btn btn-default" (click)="onUpdateTime(365, 'firstLoadedSameOrAfter', 'firstLoadedSameOrBefore')">
        {{ 'observation.form.thisYear' | translate }}
      </button>
    </div>
  </div>
</ng-container>
