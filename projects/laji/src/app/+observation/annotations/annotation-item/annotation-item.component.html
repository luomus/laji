
<div class="item-content">
  @if (item.unit.interpretations && (item.unit.interpretations.needsCheck || item.unit.interpretations.needsIdentification)) {
    <laji-annotation-item-status
      [interpretation]="item.unit.interpretations"
      [text]="false"
    ></laji-annotation-item-status>
  }
  <div class="unit-annotation"><laji-unit-annotation [showImage]="false" [unit]="item.unit"></laji-unit-annotation></div>
  <div class="gathering"><laji-gathering [visible]="true" [gathering]="item.gathering"></laji-gathering></div>
  <div class="information">
    <i class="glyphicon glyphicon-comment" [luTooltip]="'annotation.title' | translate"></i>
    @if (item.unit.annotationCount) {
      <span>
        @if (item.unit.annotationCount > 1) {
          <span>{{ item.unit.annotationCount }} {{ 'annotation.title' | translate }}</span>
        } @else {
          <span>{{ item.unit.annotationCount }} {{ 'annotation.titleSingle' | translate }}</span>
        }
      </span>
    } @else {
      {{ 'annotation.none' | translate }}
    }
  </div>
  @if (item.unit.interpretations && item.unit.interpretations.recordQuality) {
    <div class="quality">
      <div class="container-icon-text">
        <div class="icon"><i class="glyphicon glyphicon-thumbs-up" [luTooltip]="'observation.active.recordQuality' | translate"></i></div>
        <div class="text"><span>{{ item.unit.interpretations.recordQuality | label: 'warehouse' }} </span></div>
      </div>
    </div>
  }
  @if (item.unit.interpretations && item.unit.interpretations.effectiveTags && item.unit.interpretations.effectiveTags.length > 0) {
    <div class="addedTags">
      <div class="container-icon-text">
        <div class="icon"><i class="glyphicon glyphicon-bookmark" [luTooltip]="'annotation.effectiveTags' | translate"></i></div>
        <div class="text">
          @for (tag of item.unit.interpretations.effectiveTags; track tag; let i = $index) {
            @if (tagsConverted[tag | warehouse]) {
              <div class="tags"  [ngClass]="{'hide':i > limit, '': i <= limit}">
                <div class="annotation-marker" [ngClass]="{'positive': tagsConverted[tag | warehouse]?.type==='MMAN.typePositiveQuality', 'check': tagsConverted[tag | warehouse]?.type==='MMAN.typeCheck', 'negative': (tagsConverted[tag | warehouse]?.type==='MMAN.typeNegativeQuality' || tagsConverted[tag | warehouse]?.type==='MMAN.typeAdmin'), 'info': tagsConverted[tag | warehouse]?.type ==='MMAN.typeSelf', 'self': tagsConverted[tag | warehouse]?.type ==='MMAN.typeInfo' }">
                  <span>{{ tag |  warehouse | label }}</span>
                </div>
              </div>
            }
          }
          @if (item.unit.interpretations && item.unit.interpretations.effectiveTags && item.unit.interpretations.effectiveTags.length > 2) {
            <span class="show-more" role="button" (click)="toggleLimit($event)" luKeyboardClickable tabindex="0">
              @if (limit < 2) {
                <span>{{ 'annotation.list.showMoreTags' | translate }} ({{ moreTags }})</span>
              } @else {
                {{ 'annotation.list.showLessTags' | translate }}
              }
            </span>
          }
        </div>
      </div>
    </div>
  }
</div>


