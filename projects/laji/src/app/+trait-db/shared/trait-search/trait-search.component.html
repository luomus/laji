<h1>Trait search</h1>
<p>Browse, search and download trait data published on the FinBIF Trait Database.</p>

<laji-trait-search-filters
  [filters]="initialFilters"
  (filterChange)="onFilterChange($event)"
  (searchClicked)="onFilterSearchClicked()"
></laji-trait-search-filters>

<a class="btn btn-default" [href]="getDownloadUrl()" download="traits.zip">Download</a>

<lu-datatable
  [rows]="searchResult?.res.results ?? []"
  [columns]="[
    { title: 'Type', prop: 'subject.type', sortable: false },
    { title: 'Taxon', prop: 'subjectFinBIFTaxon.scientificName', sortable: false },
    { title: 'Life stage', prop: 'subject.lifeStage', sortable: false },
    { title: 'Count', prop: 'subject.individualCount', sortable: false },
    { title: 'Country', prop: 'subject.country', sortable: false },
    { title: 'Date begin', prop: 'subject.dateBegin', sortable: false },
    { title: 'Date end', prop: 'subject.dateEnd', sortable: false },
    { title: 'Subject id', prop: 'subject.id', sortable: false },
    { title: 'Kingdom', prop: 'subject.kingdom', sortable: false },
    { title: 'Author', prop: 'subject.author', sortable: false },
    { title: 'Functional group name', prop: 'subject.functionalGroupName', sortable: false },
  ]"
  [defaultColumns]="[0, 1, 2, 3, 4, 5, 6]"
  [totalPages]="searchResult?.res.total ?? 1"
  [currentPageIdx]="currentPageIdx"
  [loading]="loading"
  [ghostCount]="pageSize"
  [sorts]="searchResult?.sorts ?? []"
  (pageChange)="onChangePageIdx($event)"
  (sortChange)="onSort($event)"
></lu-datatable>

<h1>Test datatable example:</h1>

<lu-datatable
  [rows]="[
    { a: 'somedata', b: 'camel', c: 50, d: 4 },
    { a: 6954, b: 'alpaca', c: 18, d: 4 },
    { a: null, b: 'alpine ibex', c: 18, d: 4 },
    { a: { foo: 'bar' }, b: 'kangaroo', c: 20, d: 2 }
  ]"
  [columns]="[
    { title: 'custom cell template', prop: 'a', sortable: false, cellTemplate: testTemplate },
    { title: 'animal', prop: 'b' }, { title: 'lifespan', prop: 'c' },
    { title: 'number of legs', prop: 'd' }
  ]"
  [defaultColumns]="[0, 1, 2]"
  [totalPages]="1"
  [currentPageIdx]="0"
  [loading]="false"
></lu-datatable>
<ng-template #testTemplate let-data>
  <div style="color: purple;">
    {{ data.a }}
  </div>
</ng-template>

