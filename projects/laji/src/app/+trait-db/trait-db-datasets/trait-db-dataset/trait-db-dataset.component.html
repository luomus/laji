@if (data$ | async; as data) {
  @if (data.dataset !== null) {
    <div>{{ data.dataset?.name }}</div>
    <div>{{ data.dataset?.description }}</div>
    @if (data.perms !== undefined) {
      @if (data.perms !== null) {
        <button [routerLink]="['edit']" class="btn btn-default">edit</button>
      }
    } @else {
      <laji-spinner class="d-block m-6"></laji-spinner>
    }
    <div>citation: {{ data.dataset?.citation }}</div>
    <div>intellectual owner: {{ data.dataset?.intellectualOwner}}</div>
    <div>person responsible: {{ data.dataset?.personResponsible }}</div>
    <div>contact email: {{ data.dataset?.contactEmail }}</div>
    @if (data.dataset?.institutionCode) {
      <div>institution code: {{ data.dataset?.institutionCode }}</div>
    }
    <div>methods: {{ data.dataset?.methods }}</div>
    <div>taxonomic coverage: {{ data.dataset?.taxonomicCoverage}}</div>
    <div>temporal coverage: {{ data.dataset?.temporalCoverage }}</div>
    <div>geographic coverage: {{ data.dataset?.geographicCoverage }}</div>
    <div>coverage basis: {{ data.dataset?.coverageBasis }}</div>
    @if (data.dataset?.doi) {
      <div>FinBIF DOI: {{ data.dataset?.doi }}</div>
    }
    @if (data.dataset?.gbifDoi) {
      <div>GBIF DOI: {{ data.dataset?.gbifDoi }}</div>
    }
    <div>additional identifiers: {{ data.dataset?.additionalIdentifier }}</div>
    <div>published: {{ data.dataset?.published }}</div>
    @if (data.perms !== undefined) {
      @if (data.perms !== null) {
        <a [routerLink]="['data-entry']" class="btn btn-default">upload trait data</a>
        <a [routerLink]="['data-editor']" class="btn btn-default">modify existing trait data</a>
        <h3>Permissions</h3>
        <ul>
          @for (userId of data.perms.userIds; track userId) {
            <li>{{ userId }}</li>
          }
        </ul>
        <button class="btn btn-default">Edit permissions</button>
      }
    } @else {
      <laji-spinner class="d-block m-6"></laji-spinner>
    }
    @if (data.dataset?.published) {
      <h3>Browse traits</h3>
      <laji-trait-search [datasetId]="data.dataset?.id"></laji-trait-search>
    }
  } @else {
    The dataset could not be found.
  }
} @else {
  <laji-spinner class="d-block m-6"></laji-spinner>
}


