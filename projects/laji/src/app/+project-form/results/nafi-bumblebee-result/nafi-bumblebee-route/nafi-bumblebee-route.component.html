<h3>{{ routeId | label }}
  <span *ngIf="date else year"> - {{ date | amDateFormat:'L' }}</span>
  <ng-template #year>
    <span *ngIf="activeYear else empty"> - {{ activeYear }}</span>
  </ng-template>
  <ng-template #empty> 
    <span>{{ 'kaikki' | translate }}</span>
  </ng-template>
</h3>

<div style="max-width: 400px">
  <laji-nafi-bumblebee-result-filters
    (yearChange)="activeYear = $event; activeDate = undefined; onFilterChange()"
    (dateChange)="activeDate = $event; onFilterChange()"
    [yearRequired]="false"
    [routeId]="routeId"
  ></laji-nafi-bumblebee-result-filters>
</div>

<laji-nafi-bumblebee-route-table
                      (documentClick)="openViewer($event)"
                      [data]="observationStats[0]['dataSets']"
                      [routeId]="routeId"
                      [season]="date"
                      [sorts]="sorts"
                      [year]="activeYear"
                      [filter]="(activeYear !== undefined) ? 'gathering.gatheringSection' : 'gathering.conversions.year'"
></laji-nafi-bumblebee-route-table>
