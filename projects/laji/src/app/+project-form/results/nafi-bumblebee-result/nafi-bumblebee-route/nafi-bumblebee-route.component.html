<h3>{{ routeId | label }}<span *ngIf="season"> - {{ 'wbc.season.' + season | translate }}</span></h3>

<div style="max-width: 400px">
  <laji-nafi-bumblebee-result-filters
    (yearChange)="activeYear = $event; onFilterChange()"
    (seasonChange)="activeSeason = $event; onFilterChange()"
    [yearRequired]="false"
    [showAreaFilter]="false"
  ></laji-nafi-bumblebee-result-filters>
</div>

<ng-container *ngIf="!season">
  <h4>{{ 'nafi.stats.route.censuses' | translate }}</h4>
  <laji-nafi-bumblebee-routes-list
    [showFilter]="false"
    [rows]="rows"
    [loading]="!rows"
    [sorts]="sorts"
    [columnMode]="'standard'"
    [height]="'calc(80vh - 40px)'"
    [selected]="selected"
    [countLabel]="'wbc.stats.route.count'"
    (rowSelect)="openViewer($event['document.documentId'])"
  ></laji-nafi-bumblebee-routes-list>
</ng-container>

<laji-nafi-bumblebee-route-table *ngIf="season"
                      (documentClick)="openViewer($event)"
                      [data]="observationStats ? observationStats[season] : undefined"
                      [routeId]="routeId"
                      [season]="season"
></laji-nafi-bumblebee-route-table>
