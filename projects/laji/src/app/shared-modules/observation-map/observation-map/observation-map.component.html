<div class="observation-map"
    [luFillHeight]="{
      disabled: height === undefined || height === 0,
      height: clusterViewHeightOverride > 0 ? clusterViewHeightOverride : height > 0 ? height : undefined
    }"
     #mapContainer>
  <laji-map
          *ngIf="!reloading"
          [options]="mapOptions"
          [data]="mapData"
          [visualization]="hideLegend ? undefined : visualization"
          [visualizationMode]="visualizationMode"
          [settingsKey]="settingsKey"
          [displayObservationAccuracy]="showingIndividualPoints"
          (create)="onCreate($event)"
          (tileLayersChange)="onTileLayersChange($event)"
          (move)="onMapPanOrZoom($event)"
          (visualizationModeChange)="onVisualizationModeChange($event)"
          (clusterclick)="onClusterclick($event)"
  >
    <div class="loading-map loading" *ngIf="loading"></div>
  </laji-map>
</div>
<div *ngIf="clusterViewObservations.length > 0" class="cluster-info">
  <laji-observation-cluster-table [data]="clusterViewObservations" [visualizationMode]="visualizationMode"></laji-observation-cluster-table>
</div>
