<div class="legend">
  <!-- position: relative anchors the dropdown menu (which is absolutely positioned) to this element -->
  <div *ngIf="getModes().length > 1; else singleMode" dropdown style="position: relative">
    <a href id="dropdownToggle" dropdownToggle (click)="false"
      aria-controls="dropdownMenu">{{ visualization[mode].label | translate}} <span class="caret"></span></a>
    <ul id="dropdownMenu" *dropdownMenu class="dropdown-menu dropdown-menu-right"
        role="menu" aria-labelledby="dropdownToggle">
      <li *ngFor="let l of getModes()"><a (click)="switchMode(l)">{{ 'laji-map.legend.mode.' + l | translate}}</a></li>
    </ul>
  </div>
  <ng-template #singleMode>
    <div>{{ visualization[mode].label | translate}} </div>
  </ng-template>
  <ul class="mt-3">
    <li class="d-flex" *ngFor="let cat of visualization[mode].categories">
      <div class="legend-circle mr-2" [ngStyle]="{'background-color': cat.color}"></div>
      <div class="legend-label">{{ cat.label | translate }}</div>
    </li>
  </ul>
  <ng-container *ngIf="displayObservationAccuracy">
    <hr>
    <h5>{{ 'laji-map.legend.coordinateAccuracy' | translate }}<laji-info>{{ 'laji-map.legend.coordinateAccuracy.info' | translate }}</laji-info></h5>
    <ul>
      <li class="d-flex"><div class="legend-circle accuracy-1 mr-2"></div><div class="legend-label">1 - 10 m</div></li>
      <li class="d-flex"><div class="legend-circle accuracy-2 mr-2"></div><div class="legend-label">10 - 100 m</div></li>
      <li class="d-flex"><div class="legend-circle accuracy-3 mr-2"></div><div class="legend-label">100 - 1000 m</div></li>
      <li class="d-flex"><div class="legend-circle accuracy-4 mr-2"></div><div class="legend-label">1000 - 10 000 m</div></li>
      <li class="d-flex"><div class="legend-circle accuracy-5 mr-2"></div><div class="legend-label">10 000 - 100 000 m</div></li>
    </ul>
  </ng-container>
</div>