<div [hidden]="!visible" class="gathering">
  <laji-issues [data]="gathering"></laji-issues>
  <laji-gathering-rows [gathering]="gathering"></laji-gathering-rows>
  <laji-facts [show]="showFacts" [facts]="gathering.facts | factNotIn:['http://tun.fi/MY.namedPlaceID']"></laji-facts>
  @for (unit of gathering?.units; track unit) {
    @if ((showOnlyHighlighted && (highlightParents | includes:unit.unitId)) || !showOnlyHighlighted) {
      <laji-unit [identifying]="identifying" [annotationTags]="annotationTags" [openAnnotation]="openAnnotation" [showFacts]="showFacts" [documentID]="documentID" [unit]="unit" [highlight]="highlight" [highlightParents]="highlightParents" [showOnlyHighlighted]="showOnlyHighlighted"></laji-unit>
    }
  }
  @if (unitCnt ?? 0 > 1 && showOnlyHighlighted) {
    <laji-row [showWithoutValue]="true">
      <button type="button" (click)="showAllUnits.emit()" class="btn btn-default btn-sm all-units-btn">
        {{ 'viewer.otherUnits' | translate:{cnt: unitCnt! - 1} }}
      </button>
    </laji-row>
  }
</div>
