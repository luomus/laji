@for (field of fields; track field) {
  @if (object[field.name] && (field.type !== 'collection' || object[field.name].length > 0)) {
    <ng-container *ngTemplateOutlet="templates[field.name]; context: {'value': object[field.name], 'label': field.label, 'field': field}"></ng-container>
  }
}

<ng-template #checkbox let-value="value" let-label="label">
  <laji-row [title]="label" [value]="value ? ('yes' | translate) : ('no' | translate)"></laji-row>
</ng-template>
<ng-template #select let-value="value" let-label="label" let-field="field">
  <laji-row [title]="label" [value]="field.options.value_options[value]"></laji-row>
</ng-template>
<ng-template #taxonCensus let-value="value">
  <laji-row [title]="'MY.taxonCensus' | label">
    <ul class="separated-list">
      @for (census of value; track census) {
        <li [luTooltip]="census.taxonCensusType | label" [isDisabled]="hideTooltips">
          {{ census.censusTaxonID ? (census.censusTaxonID | taxon) : (census.censusTaxonSetID | label) }}
        </li>
      }
    </ul>
  </laji-row>
</ng-template>
<ng-template #taxonID let-value="value" let-label="label">
  <laji-row [title]="label" [value]="value | taxon" ngPreserveWhitespaces>
    @if (showFacts || showUnitId) {
      @if (showLinks) {
        <a target="_blank" href="http://tun.fi/{{ object.id }}">http://tun.fi/{{ object.id }}</a>
      } @else {
        <small>(http://tun.fi/{{ object.id }})</small>
      }
      <ng-template #nonlink>
        <small>(http://tun.fi/{{ object.id }})</small>
      </ng-template>
    }
  </laji-row>
</ng-template>
<ng-template #fieldset let-value="value" let-field="field">
  <laji-document-object [object]="value"
    [fields]="field.fields"
    [hideTooltips]="hideTooltips"
  ></laji-document-object>
</ng-template>
<ng-template #facts let-value="value" let-field="field">
  @if (showFacts && hasFacts) {
    <div class="facts">
      <table class="table table-hover table-condensed">
        <thead>
          <tr>
            <th colspan="2">Lis√§muuttujat</th>
          </tr>
        </thead>
        <tbody>
          @for (f of field.fields; track f) {
            @if (value[f.name] && (f.type !== 'collection' || value[f.name].length > 0)) {
              <tr>
                <th class="title"><span [innerHTML]="f.label"></span></th>
                @if (f.type === 'checkbox') {
                  <td>{{ value ? ('yes' | translate) : ('no' | translate) }}</td>
                }
                @if (f.type === 'select') {
                  <td>{{ f.options.value_options[value[f.name]] | values }}</td>
                }
                @if (f.type !== 'select' && f.type !== 'checkbox') {
                  <td>{{ value[f.name] | label | values }}</td>
                }
              </tr>
            }
          }
        </tbody>
      </table>
    </div>
  }
</ng-template>
<ng-template #default let-value="value" let-label="label">
  <laji-row [title]="label" [value]="value | label"></laji-row>
</ng-template>
