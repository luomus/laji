<div class="row lu-section">
  <div class="col-md-12">
    <div class="button-container">
      <lu-button [role]="'success'" (click)="save()">Tallenna</lu-button>
      <lu-button
        [disabled]="!recording"
        (click)="nextRecordingClick.emit()">
        {{ 'theme.kerttu.nextRecording' | translate }}
      </lu-button>
    </div>
    <h2 style="display: inline-block">{{ 'theme.kerttu.recordingAnnotation.title' | translate }}</h2>
  </div>
  <div class="col-md-12">
    <laji-audio-viewer
      [recording]="recording?.recording"
      [focusArea]="{
          xRange: recording?.xRange
        }"
      [focusAreaTimePadding]="2"
      [highlightFocusArea]="true"
      [showBrushControl]="true"
    ></laji-audio-viewer>
  </div>
  <div class="col-sm-12 checkbox-container">
    <div class="row">
      <div class="col-sm-4">
        <div class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="generalAnnotation.isLowQuality"/>Äänite on huonolaatuinen (kohinaa, sadetta tmv.)
          </label>
          <laji-info></laji-info>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="generalAnnotation.containsNoiseCausedByHumanActivity">Ääniteellä kuuluu ihmistoiminnan ääniä (liikenne tmv.)
          </label>
          <laji-info></laji-info>
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="generalAnnotation.containsHumanSpeech">Ääniteellä kuuluu ihmisten puhetta
          </label>
          <laji-info></laji-info>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="generalAnnotation.containsUnknownBirds">Ääniteellä kuuluu linnun ääniä, joita en tunnista
          </label>
          <laji-info></laji-info>
        </div>
        <div class="checkbox">
          <label>
            <input type="checkbox" [(ngModel)]="generalAnnotation.doesNotContainBirds">Ääniteellä ei kuulu linnun ääniä
          </label>
          <laji-info></laji-info>
        </div>
      </div>
    </div>
  </div>
  <div class="col-md-12">
    <div class="form-group">
      <label for="species-select">{{ 'theme.kerttu.listSpecies' | translate }}</label>
      <laji-taxon-autocomplete
        id="species-select"
        [informalTaxonGroup]="'MVL.1'"
        [onlyFinnish]="true"
        [onlySpecies]="true"
        [showResult]="false"
        [whiteList]="taxonList"
        (taxonSelect)="addTaxonToSelected($event, 'main')"
      ></laji-taxon-autocomplete>
    </div>
    <laji-kerttu-occurrence-table
      [(selectedTaxons)]="selectedTaxons.main"
      [loading]="!taxonList || loadingTaxons || !taxonExpertise"
      [componentId]="0"
      [taxonExpertise]="taxonExpertise"
      (missingTaxonClick)="showModal($event)"
    >
    </laji-kerttu-occurrence-table>
  </div>
  <div class="col-md-12">
    <div class="form-group">
      <label for="other-animal-species-select">{{ 'theme.kerttu.listOtherSpecies' | translate }}</label>
      <laji-taxon-autocomplete
        id="other-animal-species-select"
        [showResult]="false"
        [blackList]="taxonList"
        (taxonSelect)="addTaxonToSelected($event, 'other')"
      ></laji-taxon-autocomplete>
    </div>
    <laji-kerttu-occurrence-table
      [(selectedTaxons)]="selectedTaxons.other"
      [loading]="!taxonList || loadingTaxons"
      [componentId]="1"
    >
    </laji-kerttu-occurrence-table>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" bsModal #modal="bs-modal">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Puuttuva laji</h3>
      </div>
      <div class="modal-body">
        <div>
          Laji "<laji-taxon-name style="display: inline-block" [taxon]="modalTaxon" [addLink]="false"></laji-taxon-name>" puuttuu niiden lajien joukosta, jotka olet määritelly <em>Kirjaa asiantuntijuutesti</em> -osiossa. Haluatko lisätä sen?
        </div>
      </div>
      <div class="modal-footer">
        <lu-button (click)="closeModal(true)" [role]="'success'">{{ 'yes' | translate }}</lu-button>
        <lu-button (click)="closeModal()">{{ 'haseka.delete.cancel' | translate }}</lu-button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
