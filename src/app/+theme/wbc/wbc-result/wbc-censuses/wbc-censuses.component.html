<h3>{{'wbc.stats.censuses' | translate}}</h3>

<laji-wbc-result-filters (yearChange)="activeYear = $event; onFilterChange()"
                         (seasonChange)="activeSeason = $event; onFilterChange()"
                         [yearRequired]="true"
                         [showAreaFilter]="false"
></laji-wbc-result-filters>

<div id="navbar">
  <ul class="nav nav-tabs nav-justified">
    <li role="presentation" [ngClass]="{active: active === 'list'}">
      <a (click)="setActive('list')">{{'np.list' | translate}}</a>
    </li>
    <li role="presentation" [ngClass]="{active: active === 'map'}">
      <a (click)="setActive('map')">{{'np.map' | translate}}</a>
    </li>
  </ul>
</div>

<laji-wbc-routes-list
  *ngIf="active === 'list'"
  [rows]="rows"
  [selected]="selected"
  [sorts]="sorts"
  [showNameAsLink]="false"
  [loading]="loading"
  (onRowSelect)="openViewer($event['document.documentId'])"
></laji-wbc-routes-list>
<laji-wbc-routes-map
  *ngIf="active === 'map'"
  [data]="rows"
  [showNameAsLink]="false"
  [loading]="loading"
  [countLabel]="'wbc.stats.censusCount'"
  (onRowSelect)="openViewer($event['document.documentId'])"
></laji-wbc-routes-map>

<div class="modal fade" bsModal #documentModal="bs-modal"
     (onHidden)="documentModalVisible = false"
     (onShow)="documentModalVisible = true"
     tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" *ngIf="documentModalVisible">
      <div class="modal-body">
        <button type="button" class="close pull-right" aria-label="Close" (click)="documentModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
        <laji-document [useWorldMap]="false"
                       [uri]="shownDocument"
        ></laji-document>
      </div>
    </div>
  </div>
</div>
