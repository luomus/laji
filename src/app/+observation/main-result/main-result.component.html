<div class="row main-result">
  <div class="col-md-5 col-lg-4">
    <laji-ykj-map
      *ngIf="mapQuery"
      [title]="title"
      [height]="'calc(80vh - 30px)'"
      [query]="mapQuery"
      (onGridClick)="onGridSelect($event)"></laji-ykj-map>
    <div class="close-list top-button" *ngIf="hasAggregateResult">
      <a class="label label-danger pull-right link" (click)="showAllOnMap()">x</a>
    </div>
  </div>
  <div class="col-md-7 col-lg-8">
    <div [hidden]="showObservationList">
      <laji-observation-table
        *ngIf="aggrQuery"
        (rowSelect)="onAggregateSelect($event)"
        (selectChange)="setAggregateBy($event)"
        (pageSizeChange)="setPageSize($event)"
        [pageSize]="pageSize"
        [height]="'calc(80vh - 30px)'"
        [query]="aggrQuery"
        [showSettingsMenu]="true"
        [isAggregate]="true"
        [selected]="aggregateBy"
      ></laji-observation-table>
    </div>
    <div *ngIf="showObservationList">
      <laji-observation-table
        *ngIf="listQuery"
        (rowSelect)="showDocument($event)"
        (selectChange)="setSelectedFields($event)"
        [pageSize]="pageSize"
        [height]="'calc(80vh - 30px)'"
        [query]="listQuery"
        [showSettingsMenu]="true"
        [isAggregate]="false"
        [selected]="selected"
      ></laji-observation-table>
      <div class="close-list top-button">
        <a class="label label-danger pull-right link" (click)="closeList()">x</a>
      </div>
      <div class="close-list top-info" *ngIf="listQuery.ykj10kmCenter">
        <span class="label label-danger pull-right link" (click)="removeGridFromList()">{{listQuery.ykj10kmCenter}} x</span>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" bsModal #documentModal="bs-modal"
     tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-body">
        <button type="button" class="close pull-right" aria-label="Close" (click)="documentModal.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
        <laji-document [uri]="documentId" [highlight]="highlightId"></laji-document>
      </div>
    </div>
  </div>
</div>
