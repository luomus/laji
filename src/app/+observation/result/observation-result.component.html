<tabset>
  <tab [heading]="'search.result.map' | translate"
       (select)="activate('map')"
       [active]="active === 'map'">
    <div *ngIf="activated['map']">
      <laji-observation-map
              [showItemsWhenLessThan]="500"
              [opacity]="0.5"
              [tick]="searchQuery.tack"
              [visible]="active === 'map'"
              [height]="500"
              [query]="searchQuery.query"
              [draw]="{rectangle: true, marker: false, polygon: false, polyline: false, circle: false}"
              [legend]="true"
              [initWithWorldMap]="true"
              (create)="pickLocation($event)"
      ></laji-observation-map>
    </div>
  </tab>
  <tab [heading]="'search.result.list' | translate"
       (select)="activate('list')"
       [active]="active === 'list'">
    <laji-observation-result-list *ngIf="activated['list']"></laji-observation-result-list>
  </tab>
  <tab [heading]="'search.result.species' | translate"
       (select)="activate('species')"
       [active]="active === 'species'">
    <laji-observation-aggregate
            [field]="{
              'en': 'unit.linkings.taxon.scientificName,unit.linkings.taxon.nameEnglish,unit.linkings.taxon.id',
              'fi': 'unit.linkings.taxon.scientificName,unit.linkings.taxon.nameFinnish,unit.linkings.taxon.id',
              'sv': 'unit.linkings.taxon.scientificName,unit.linkings.taxon.nameSwedish,unit.linkings.taxon.id'
            }"
            [title]="'search.result.species' | translate"
            [valuePicker]="pickValue"
            [linkPicker]="pickLink"
            [lang]="translate.currentLang"
            [queryOverride]="{includeNonValidTaxa: false, taxonRankId: 'MX.species'}"
            [limit]="50"
            [showPager]="true"></laji-observation-aggregate>
  </tab>
  <tab [heading]="'search.result.stats' | translate"
       (select)="activate('stats')"
       [active]="active === 'stats'">
    <div *ngIf="activated['stats']">
      <div class="form-group">
        <div class="col-md-6">
          <laji-observation-chart
                  [height]="300"
                  [showLegend]="true"
                  [active]="active === 'stats'"
          ></laji-observation-chart>
        </div>
        <div class="col-md-6">
          <div class="form-group">
            <div class="col-sm-12">
              <laji-observation-filter
                      [(filter)]="filters.recordBasis"
                      (onSelect)="onFilterSelect.emit($event)"
                      [lang]="translate.currentLang"></laji-observation-filter>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <laji-observation-filter
                      [(filter)]="filters.image"
                      (onSelect)="onFilterSelect.emit($event)"
                      [lang]="translate.currentLang"></laji-observation-filter>
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-12">
              <laji-observation-filter
                      [(filter)]="filters.collection"
                      (onSelect)="onFilterSelect.emit($event)"
                      [lang]="translate.currentLang"></laji-observation-filter>
            </div>
          </div>
        </div>
      </div>
    </div>
  </tab>
  <tab
          [heading]="'search.result.load' | translate"
          (select)="activate('load')"
          [active]="active === 'load'">
    <div class="form-group">
      <div class="col-md-12" style="padding-top: 10px;">
        <observation-download [loadLimit]="loadLimit"></observation-download>
      </div>
    </div>
  </tab>
</tabset>
