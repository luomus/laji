<div bsModal #downloadModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="Download modal"
     aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close pull-right" type="button" (click)="close()">
          <i class="glyphicon glyphicon-remove"></i>
        </button>
        <h3 class="modal-title">{{ 'search.result.load' | translate }}</h3>
      </div>
      <div class="modal-body">
        <p
          [innerHtml]="'result.load.intro' | translate:{private: (privateCount | formattedNumber:'&nbsp;'), count: (unitCount | formattedNumber:'&nbsp;'), public: ((unitCount - privateCount) | formattedNumber:'&nbsp;'), species: (speciesCount | formattedNumber:'&nbsp;') }">
        </p>
        <section>
          <h3>{{ 'result.load.titleSimple' | translate }}</h3>
          <p>{{ 'result.load.introSimple' | translate }}</p>
          <laji-download
            *ngIf="maxSimpleDownload >= unitCount"
            role="primary"
            [showBackdrop]="false"
            (download)="download($event)"
            [downloadLoading]="downloadLoading">
            <span>
              {{ 'haseka.submissions.download' | translate }}
              <i class="glyphicon glyphicon-download-alt"></i>
            </span>
          </laji-download>
        </section>
        <ng-container *lajiLoggedIn="false">
          {{ 'force.login' | translate }}
        </ng-container>
        <ng-container *lajiLoggedIn="true">
          <alert *ngIf="hasPersonalData">
            <strong>{{ 'result.load.personalData' | translate }}</strong>
          </alert>
          <section>
            <h3>{{ 'observation.download.publicTitle' | translate }}</h3>
            <div *ngIf="loadLimit < unitCount">
              {{ 'observation.export.tooMany' | translate:{max: (loadLimit | formattedNumber:'&nbsp;')} }}
            </div>
            <div *ngIf="unitCount == 0">
              {{ 'observation.export.tooLittle' | translate }}
            </div>
            <div *ngIf="loadLimit >= unitCount && unitCount > 0" style="margin-bottom: 15px;">
              <p
                [innerHtml]="'result.load.introPublic' | translate:{private: (privateCount | formattedNumber:'&nbsp;'), count: (unitCount | formattedNumber:'&nbsp;')} ">
              </p>
              <lu-button
                [disabled]="requests['download'] === requestStatus.done || requests['download'] === requestStatus.loading"
                (click)="makePublicRequest()">
                {{ 'observation.download.loadPublic' | translate }}
              </lu-button>
            </div>
          </section>
          <section>
            <h3>{{ 'observation.download.privateTitle' | translate }}</h3>
            <div class="col-sm-12" *ngIf="loadLimit < unitCount">
              {{ 'observation.export.tooMany' | translate:{max: (loadLimit | formattedNumber:'&nbsp;')} }}
            </div>
            <div *ngIf="loadLimit >= unitCount">
              <p
                [innerHtml]="'result.load.introPrivate' | translate:{private: (privateCount | formattedNumber:'&nbsp;'), count: (unitCount | formattedNumber:'&nbsp;')}"></p>
              <lu-button
                [disabled]="requests['downloadApprovalRequest'] === requestStatus.done || requests['downloadApprovalRequest'] === requestStatus.loading"
                (click)="makePrivateRequest()">
                {{ 'observation.download.loadPrivate' | translate }}
              </lu-button>
            </div>
          </section>
          <section>
            <h3>{{ 'observation.download.specimenTitle' | translate }}</h3>
            <div *ngIf="taxaLimit < speciesCount">
              {{ 'observation.export.tooManySpecies' | translate:{max: (taxaLimit | formattedNumber:'&nbsp;')} }}
            </div>
            <div *ngIf="speciesCount == 0">
              {{ 'observation.export.tooLittle' | translate }}
            </div>
            <div *ngIf="taxaLimit >= speciesCount && speciesCount > 0">
              <p [innerHtml]="'result.load.introSpecies' | translate"></p>
              <lu-button
                routerLink="/api/warehouse/query/aggregate?{{ csvParams }}&format=csv">
                {{ 'observation.download.loadSpecies' | translate }}
              </lu-button>
            </div>
          </section>
        </ng-container>
      </div>
    </div>
  </div>
</div>
