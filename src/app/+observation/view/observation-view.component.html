<form id="wrapper" *ngIf="vm$ | async; let vm">
  <div class="row">
    <div class="form-filters"
         [ngClass]="{'col-sm-4 col-md-3 col-lg-2 col-sm-push-8 col-md-push-9 col-lg-push-10': showFilter}">
      <laji-search-filters
         [query]="vm.query"
         (queryChange)="onQueryChange($event)"
         [queryType]="'observation'"
         [showFilter]="vm.filterVisible"
         (showFilterChange)="filterVisible($event)">
        <laji-observation-form
          [query]="vm.query"
          [invasiveStatuses]="invasiveStatuses"
          [dateFormat]="dateFormat"
          [advancedMode]="vm.advanced"
          (advancedModeChange)="onAdvanceModeChange($event)"
          (queryChange)="onQueryChange($event)"
          (mapDraw)="draw($event)"
        ></laji-observation-form>
      </laji-search-filters>
    </div>
    <div
      style="margin-top: 10px;"
      [ngClass]="{
       'result-list col-sm-8 col-md-9 col-lg-10': showFilter,
       'col-sm-12': !showFilter
     }"
    >
      <ng-container *lajiBrowserOnly>
        <div class="row">
          <div class="col-xs-12">
            <div class="pull-right toggle-intro" *ngIf="!vm.showIntro">
              <i (click)="toggleInfo()" class="link glyphicon glyphicon-info-sign"></i>
            </div>
          </div>
        </div>
        <alert *ngIf="vm.showIntro" [dismissible]="true" (onClose)="toggleInfo()" [type]="'info'">
          <div [innerHtml]="'observation.intro' | translate"></div>
        </alert>
      </ng-container>
      <div #tabs>
        <laji-observation-result
          [loading]="vm.loading"
          [lgScreen]="vm.lgScreen"
          [speciesCount]="vm.countSpecies"
          [unitCount]="vm.countUnit"
          [active]="activeTab"
          [query]="vm.query"
          (queryChange)="onQueryChange($event)"
        ></laji-observation-result>
      </div>
    </div>
  </div>
</form>
