<lu-sidebar [position]="'right'" *ngIf="vm$ | async; let vm">
  <main>
    <ng-container *lajiBrowserOnly>
      <div class="row">
        <div class="col-xs-12">
          <div class="pull-right toggle-intro" *ngIf="!vm.showIntro">
            <i (click)="toggleInfo()" class="link glyphicon glyphicon-info-sign"></i>
          </div>
        </div>
      </div>
      <alert *ngIf="vm.showIntro" [dismissible]="true" (onClose)="toggleInfo()" [type]="'info'">
        <div [innerHtml]="'observation.intro' | translate"></div>
      </alert>
    </ng-container>
    <laji-observation-result
      [resultBase]="formType"
      [visible]="visible"
      [skipUrlParameters]="skipUrlParameters"
      [basePath]="basePath"
      [lang]="translate.currentLang"
      [loadingUnits]="vm.loadingUnits"
      [loadingTaxa]="vm.loadingTaxa"
      [lgScreen]="vm.lgScreen"
      [speciesCount]="vm.countTaxa"
      [unitCount]="vm.countUnit"
      [active]="activeTab"
      [query]="vm.query"
      (queryChange)="onQueryChange($event)"
      [listSettings]="settingsList$ | async"
      (listSettingsChange)="onListSettingsChange($event)"
    ></laji-observation-result>
  </main>
  <nav>
    <laji-observation-form
      [query]="vm.query"
      [invasiveStatuses]="invasiveStatuses"
      [dateFormat]="dateFormat"
      [advancedMode]="vm.advanced"
      (advancedModeChange)="onAdvanceModeChange($event)"
      (queryChange)="onQueryChange($event)"
      (mapDraw)="draw($event)"
    ></laji-observation-form>
  </nav>
</lu-sidebar>
