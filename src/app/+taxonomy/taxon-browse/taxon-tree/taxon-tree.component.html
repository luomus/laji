<div id="taxon-tree">
  <div style="position: relative">
    <div>
      <label>
        {{ 'species.tree.taxonSearch' | translate }}:
        <laji-taxon-select
          (taxonIdChange)="onTaxonSelect($event)"
          [taxonId]="taxon"
          [searchParams]="taxonSelectFilters">
        </laji-taxon-select>
      </label>
      <!--button class="btn btn-default" (click)="hideUnopenedNodes()">Piilota</button>
      <button class="btn btn-default" (click)="showAllNodes()">Näytä</button-->
    </div>
    <div class="show-main-levels-wrapper">
      <label>
        <input type="checkbox"
               [(ngModel)]="showMainLevels"
               (ngModelChange)="setSkipParams()"
               name="showMainLevels">
        {{ 'species.tree.showMainLevels' | translate }}
      </label>
      <laji-info>{{ 'species.tree.info.showMainLevels' | translate }}</laji-info>
    </div>
  </div>

  <div class="species-table-wrapper">
    <laji-tree-table #treeTable
                     [columns]="columns"
                     [nodes]="nodes"
                     [getChildren]="getChildrenFunc"
                     [getParents]="getParentsFunc"
                     [skipParams]="skipParams"
                     [hideParams]="hideParams"
                     [activeId]="activeId">
    </laji-tree-table>
    <div class="setting-menu link" (click)="openSettingsModal()">
      <i class="glyphicon glyphicon-cog"></i>
    </div>
  </div>
</div>

<laji-species-download #speciesDowload
                       [downloadLoading]="downloadLoading"
                       (download)="download($event)">
</laji-species-download>

<laji-species-list-options-modal #settingsModal
                                 (close)="onCloseSettingsModal()"
                                 (settingsLoaded)="onSettingsLoaded()"
                                 [searchQuery]="searchQuery"
                                 [columnLookup]="columnService.columnLookup"
                                 [requiredFields]="['scientificName']"
                                 [listType]="'tree'">
</laji-species-list-options-modal>
