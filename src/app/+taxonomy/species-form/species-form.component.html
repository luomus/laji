<laji-search-filters [searchQuery]="searchQuery"
                     [showFilter]="showFilter"
                     (onShowFilterChange)="showFilterChange($event)">
  <div class="taxon-panel">
    <div class="row">
      <label class="col-sm-12">
        {{'observation.active.informalTaxonGroupId' | translate}}:
      </label>
    </div>
    <div class="row">
      <div class="lj-input-wrap">
        <observation-group-select
          [(ngModel)]="searchQuery.query.informalTaxonGroupId"
          name="informalTaxonGroupId"
          [lang]="translate.currentLang"
          (onSelect)="onQueryChange()">
          {{'observation.active.informalTaxonGroupAll'|translate}}
        </observation-group-select>
      </div>
    </div>

    <div class="form-group">
      <label class="col-sm-12">
        {{'species.form.specimen' | translate}}:
      </label>
      <div class="col-sm-12">
        <input
          [ngClass]="{loading: typeaheadLoading}"
          type="text"
          class="form-control input-sm"
          name="target"
          [(ngModel)]="formQuery.taxon"
          [typeahead]="dataSource"
          [typeaheadOptionsLimit]="limit"
          [typeaheadWaitMs]="200"
          [typeaheadMinLength]="3"
          [typeaheadFocusFirst]="false"
          [typeaheadOptionField]="'value'"
          (typeaheadLoading)="changeTypeaheadLoading($event)"
          (typeaheadOnSelect)="onTaxonSelect($event)"
          (keyup)="onTaxonSelect($event)"
          autocomplete="off"
          autocorrect="off"
        >
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-12">
        <bSwitch
          name="onlyFinnish"
          [switch-off-text]="'species.form.all' | translate"
          [switch-on-text]="'species.form.finnish' | translate"
          [switch-on-color]="'primary'"
          [switch-size]="'small'"
          [(ngModel)]="formQuery.onlyFinnish"
          [switch-base-class]="'bootstrap-switch'"
          (onChangeState)="onQueryChange()">
        </bSwitch>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-12">
        <laji-metadata-select
          [(ngModel)]="searchQuery.query.redListStatusFilters"
          (ngModelChange)="onQueryChange()"
          [multiple]="true"
          [useFilter]="false"
          name="redListStatusId"
          [placeholder]="'observation.form.redListStatusId'"
          [alt]="'MX.iucnStatuses'"
          [lang]="translate.currentLang"></laji-metadata-select>
      </div>
    </div>

    <div class="form-group">
      <div class="col-sm-12">
        <laji-metadata-select
          [(ngModel)]="searchQuery.query.adminStatusFilters"
          (ngModelChange)="onAdministrativeStatusChange()"
          [multiple]="true"
          [placeholder]="'MX.hasAdminStatus' | label"
          name="administrativeStatusId"
          [alt]="'MX.adminStatusEnum'"
          [lang]="translate.currentLang"></laji-metadata-select>
      </div>
    </div>
  </div>

  <div class="row">
    <div laji-panel [title]="'Vieraslajit'" [autoToggle]="true">
      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.onlyInvasive"
                   (ngModelChange)="onInvasiveToggle()"
                   name="invasive">
            {{'observation.form.invasive' | translate}}
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.onlyNonInvasive"
                   (ngModelChange)="onNonInvasiveToggle()"
                   name="isNotInvasive">
            {{'observation.form.nonInvasive' | translate}}
          </label>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.euInvasiveSpeciesList"
                   (ngModelChange)="onInvasiveCheckBoxToggle('euInvasiveSpeciesList')"
                   name="euInvasiveSpeciesList">
            {{'MX.euInvasiveSpeciesList' | label}}
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.nationallySignificantInvasiveSpecies"
                   (ngModelChange)="onInvasiveCheckBoxToggle('nationallySignificantInvasiveSpecies')"
                   name="nationallySignificantInvasiveSpecies">
            {{'MX.nationallySignificantInvasiveSpecies' | label}}
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.quarantinePlantPest"
                   (ngModelChange)="onInvasiveCheckBoxToggle('quarantinePlantPest')"
                   name="quarantinePlantPest">
            {{'MX.quarantinePlantPest' | label}}
          </label>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <label>
            <input type="checkbox"
                   [ngModel]="formQuery.allInvasiveSpecies"
                   (ngModelChange)="onInvasiveCheckBoxToggle(invasiveStatuses)"
                   name="allInvasiveSpecies">
            {{'observation.form.allInvasive' | translate}}
          </label>
        </div>
      </div>
    </div>
  </div>
</laji-search-filters>

