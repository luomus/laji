<div class="annotations">
  <laji-spinner [spinning]="!annotations"></laji-spinner>
  <div class="annotation" *ngFor="let annotation of annotations">
    <div class="row">
      <div class="col-xs-12 row-title">
        <div *ngIf="annotation.byPerson; else annotationByPerson">
          <span class="annotation-person">{{ annotation.byPerson | toQName | users }} </span>
          <span>{{ annotation.created | date: 'dd.MM.yyyy' }}</span>
        </div>
        <ng-template #annotationByPerson>
          <span class="annotation-person">{{ annotation.annotationByPerson | toQName | users }} </span>
          <span>{{ annotation.created | date: 'dd.MM.yyyy' }}</span>
        </ng-template>
        <p class="content new-identification" *ngIf="annotation.identification && annotation.identification.taxon">
            <span>{{ 'annotation.newIdentification' | translate }}:</span> {{ annotation.identification.taxon }}
        </p>
        <div class="tags" *ngIf="annotation.addedTags || annotation.addedTags">
         <div class="added-tags" *ngIf="annotation.addedTags.length > 0">
           <div class="tag" *ngFor="let addedTag of annotation.addedTags" [ngSwitch]="addedTag | toQName">
             <div *ngSwitchCase="annotationTagsObservation[addedTag | toQName].value" class="annotation-marker {{ annotationTagsObservation[addedTag | toQName].quality }}" >
                <span class="annotation-star {{ annotationTagsObservation[addedTag | toQName].quality }}"></span>
                <span>{{ addedTag | toQName | label }}</span>
             </div>
           </div>
         </div>
         <div class="removed-tags" *ngIf="annotation.removedTags.length > 0">
            <ul class="comma-list">
              {{ 'annotation.removedTags' | translate }}: 
              <li *ngFor="let removedTag of annotation.removedTags">
                    {{ removedTag | toQName | label }}
              </li>
            </ul>
          </div>
        </div>
        <!--<span class="person pull-right">
          <button
            type="button"
            class="btn btn-danger btn-xs"
            (click)="remove.emit(annotation)"
            *ngIf="(annotation.annotationByPerson |Â toQName) === personID">
            <i class="glyphicon glyphicon-remove"></i>
          </button>
        </span>-->
        <ng-container *ngIf="annotation.annotationClass">
          <span [ngSwitch]="annotation.annotationClass | toQName" [tooltip]="annotation.annotationClass | toQName | label"
            class="annotation-class">
            <span *ngSwitchCase="annotationClass.AnnotationClassAcknowledged">
              <i class="fa fa-check-square-o"></i>
            </span>
            <span *ngSwitchCase="annotationClass.AnnotationClassReliable" class="annotation-positive">
              <i class="fa fa-check-circle-o"></i>
              <i class="fa fa-check-circle-o"></i>
            </span>
            <span *ngSwitchCase="annotationClass.AnnotationClassLikely"  class="annotation-positive">
              <i class="fa fa-check-circle-o"></i>
            </span>
            <span *ngSwitchCase="annotationClass.AnnotationClassSuspicious"  class="annotation-negative">
              <i class="fa fa-exclamation-circle"></i>
            </span>
            <span *ngSwitchCase="annotationClass.AnnotationClassUnreliable"  class="annotation-negative">
              <i class="fa fa-exclamation-circle"></i>
              <i class="fa fa-exclamation-circle"></i>
            </span>
            <span *ngSwitchDefault="">
              <i class="fa fa-comment-o"></i>
            </span>
          </span>
        </ng-container>
        <small>
          <span class="annotation-title" *ngIf="annotation.annotationBySystem">
            {{ 'annotationBySystem' | translate }}
            <!--{{annotation.annotationBySystem | toQName | source}}-->
          </span>
          <span class="annotation-title" *ngIf="(annotation.type | toQName) === types.TypeUnidentifiable">
            {{ 'MAN.typeUnidentifiable' | label }}
          </span>
          <span class="annotation-title" *ngIf="annotation.annotationClass">{{ annotation.annotationClass | toQName | label }}</span>
        </small>
      </div>
    </div>
    <div class="row" *ngIf="annotation.opinion">
      <div class="col-xs-12">
        {{ 'MAN.opinion' | label }}:
        {{ annotation.opinion }}
      </div>
    </div>
    <p class="content" *ngIf="annotation.notes">
      {{ annotation.notes }}
    </p>
  </div>
  <div class="no-annotations" *ngIf="annotations && annotations.length === 0">
    {{ 'annotation.none' | translate }}
  </div>
</div>
