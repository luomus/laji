<div *ngIf="vm$ | async; let vm" class="row">
  <laji-spinner [spinning]="vm.loading" [overlay]="true"></laji-spinner>
  <div style="margin-top: 20px;">
    <div [hidden]="!hasAlertContent">
      <laji-info-page child="2860" (hasContent)="hasAlertContent = $event"></laji-info-page>
    </div>
    <ng-container [ngSwitch]="vm.error">
      <alert type="danger" *ngSwitchCase="errors.notFoundForm">
        {{ 'haseka.form.formNotFound' | translate:{formId: this.formId} }}
      </alert>
      <alert type="danger" *ngSwitchCase="errors.notFoundDocument">
        {{ 'haseka.form.documentNotFound' | translate:{documentId: this.documentId} }}
      </alert>
      <alert type="danger" *ngSwitchCase="errors.loadFailed">
        {{ 'haseka.form.genericError' | translate }}
      </alert>
      <alert type="danger" *ngSwitchCase="errors.noAccessToDocument">
        {{ 'haseka.form.noAccessToDocument' | translate }}
      </alert>
    </ng-container>
  </div>
  <laji-document-form-header *ngIf="showHeader && vm.error === errors.ok"
      [formID]="vm.form.id"
      [edit]="!!documentId"
      [namedPlace]="vm.namedPlace"
      [isAdmin]="isAdmin"
      [formData]="vm.form.formData"
      [displayObservationList]="!vm.form.formData?.id && vm.namedPlace?.namedPlace && vm.form.options?.displayOwnSubmissions"
  ></laji-document-form-header>
    <div class="clear"></div>
    <div class="laji-form" *ngIf="vm.error === errors.ok">
      <laji-form
        [formData]="vm.form"
        [settingsKey]="formId"
        [showShortcutButton]="showShortcutButton"
        (dataChange)="onChange($event)"
        (dataSubmit)="onSubmit($event)"
        (validationError)="onValidationError($event)"
      ></laji-form>
      <laji-document-form-footer
        [form]="vm.form"
        [status]="status"
        [readonly]="vm.form.readonly"
        [edit]="documentId"
        [errors]="validationErrors"
        [lajiForm]="lajiForm"
        (lock)="lock($event)"
        (submitPublic)="submitPublic()"
        (submitPrivate)="submitPrivate()"
        (cancel)="onCancel()"></laji-document-form-footer>
    </div>
</div>
